

<html lang="en">
<head>
    <title>Map</title>
    <link href="map.css" rel="stylesheet" type="text/css">
    <link href="common.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <script type="text/javascript">

        let dataPoints_temp = [];
        let dataPoints_qual = [];

        // change_data if influx db was fully operationalm for presentatoin dummy values are used
        //
        // function change_data(classroom){
        //     var temp_path = "\\json\\temperatureResults" + classroom + ".json";
        //     var qual_path = "\\json\\airQualityResults" + classroom + ".json";
        //
        //     var json_temp = require(temp_path);
        //     var json_qual = require(qual_path);
        //
        //     dataPoints_temp = for (var i = 0; i < json_temp.length; i++){
        //         dataPoints_temp.push({
        //             x: json_temp[i][0],
        //             y: json_temp[i][1]
        //         })
        //     }
        //
        //     dataPoints_qual = for (var i = 0; i < json_qual.length; i++){
        //         dataPoints_qual.push({
        //             x: json_qual[i][0],
        //             y: json_qual[i][1]
        //         })
        //     }
        // }

        // function change_data(classroom){
        //
        //     let json_temp;
        //     let json_qual;
        //
        //     if(classroom === '2_75'){
        //         json_temp = [[0, 21], [1, 21], [2, 27], [3, 18], [4, 26], [5, 20], [6, 22], [7, 27], [8, 30], [9, 22], [10, 15], [11, 26], [12, 30], [13, 24], [14, 18], [15, 15], [16, 30], [17, 20], [18, 18], [19, 19], [20, 16], [21, 16], [22, 17], [23, 16], [24, 16], [25, 15], [26, 27], [27, 20], [28, 24], [29, 26], [30, 26], [31, 26], [32, 29], [33, 24], [34, 22], [35, 21], [36, 20], [37, 20], [38, 26], [39, 30], [40, 17], [41, 22], [42, 26], [43, 29], [44, 26], [45, 16], [46, 23], [47, 29], [48, 23], [49, 15], [50, 16], [51, 23], [52, 17], [53, 20], [54, 25], [55, 19], [56, 28], [57, 20], [58, 21], [59, 17], [60, 26], [61, 27], [62, 15], [63, 26], [64, 20], [65, 27], [66, 23], [67, 20], [68, 25], [69, 17], [70, 24], [71, 26], [72, 23], [73, 17], [74, 23], [75, 23], [76, 15], [77, 26], [78, 24], [79, 15], [80, 29], [81, 19], [82, 24], [83, 23], [84, 22], [85, 22], [86, 30], [87, 17], [88, 18], [89, 22], [90, 30], [91, 24], [92, 26], [93, 24], [94, 28], [95, 20], [96, 23], [97, 15], [98, 28], [99, 15]];
        //         //chart_temp.data.dataPoints = dataPoints_temp;
        //         json_qual = [[0, 20], [1, 20], [2, 17], [3, 26], [4, 25], [5, 18], [6, 16], [7, 21], [8, 17], [9, 17], [10, 24], [11, 15], [12, 25], [13, 22], [14, 23], [15, 16], [16, 28], [17, 30], [18, 23], [19, 17], [20, 20], [21, 24], [22, 20], [23, 17], [24, 15], [25, 24], [26, 26], [27, 15], [28, 28], [29, 23], [30, 15], [31, 24], [32, 15], [33, 18], [34, 21], [35, 16], [36, 23], [37, 20], [38, 19], [39, 27], [40, 18], [41, 23], [42, 17], [43, 19], [44, 30], [45, 26], [46, 21], [47, 16], [48, 28], [49, 30], [50, 21], [51, 30], [52, 26], [53, 17], [54, 16], [55, 24], [56, 22], [57, 29], [58, 15], [59, 28], [60, 19], [61, 24], [62, 24], [63, 15], [64, 23], [65, 24], [66, 29], [67, 19], [68, 17], [69, 26], [70, 15], [71, 20], [72, 25], [73, 27], [74, 28], [75, 27], [76, 29], [77, 29], [78, 28], [79, 22], [80, 18], [81, 18], [82, 19], [83, 16], [84, 20], [85, 22], [86, 28], [87, 18], [88, 16], [89, 15], [90, 16], [91, 15], [92, 25], [93, 15], [94, 18], [95, 21], [96, 25], [97, 25], [98, 16], [99, 27]];
        //         //chart_qual.data.dataPoints = dataPoints_qual;
        //     }
        //
        //     else if(classroom === '2_85'){
        //         json_temp = [[0, 16], [1, 16], [2, 16], [3, 23], [4, 17], [5, 23], [6, 21], [7, 23], [8, 30], [9, 21], [10, 20], [11, 28], [12, 21], [13, 24], [14, 17], [15, 15], [16, 20], [17, 15], [18, 20], [19, 22], [20, 24], [21, 16], [22, 19], [23, 28], [24, 25], [25, 16], [26, 16], [27, 16], [28, 27], [29, 22], [30, 24], [31, 16], [32, 25], [33, 18], [34, 27], [35, 20], [36, 24], [37, 17], [38, 24], [39, 22], [40, 26], [41, 29], [42, 27], [43, 27], [44, 19], [45, 23], [46, 25], [47, 29], [48, 16], [49, 19], [50, 18], [51, 17], [52, 18], [53, 24], [54, 30], [55, 28], [56, 29], [57, 17], [58, 25], [59, 28], [60, 30], [61, 15], [62, 30], [63, 27], [64, 20], [65, 23], [66, 16], [67, 19], [68, 21], [69, 20], [70, 18], [71, 25], [72, 27], [73, 16], [74, 20], [75, 27], [76, 18], [77, 15], [78, 28], [79, 23], [80, 21], [81, 15], [82, 26], [83, 26], [84, 29], [85, 28], [86, 18], [87, 24], [88, 25], [89, 29], [90, 18], [91, 21], [92, 22], [93, 15], [94, 16], [95, 24], [96, 30], [97, 27], [98, 17], [99, 22]];
        //         json_qual = [[0, 21], [1, 21], [2, 27], [3, 18], [4, 26], [5, 20], [6, 22], [7, 27], [8, 30], [9, 22], [10, 15], [11, 26], [12, 30], [13, 24], [14, 18], [15, 15], [16, 30], [17, 20], [18, 18], [19, 19], [20, 16], [21, 16], [22, 17], [23, 16], [24, 16], [25, 15], [26, 27], [27, 20], [28, 24], [29, 26], [30, 26], [31, 26], [32, 29], [33, 24], [34, 22], [35, 21], [36, 20], [37, 20], [38, 26], [39, 30], [40, 17], [41, 22], [42, 26], [43, 29], [44, 26], [45, 16], [46, 23], [47, 29], [48, 23], [49, 15], [50, 16], [51, 23], [52, 17], [53, 20], [54, 25], [55, 19], [56, 28], [57, 20], [58, 21], [59, 17], [60, 26], [61, 27], [62, 15], [63, 26], [64, 20], [65, 27], [66, 23], [67, 20], [68, 25], [69, 17], [70, 24], [71, 26], [72, 23], [73, 17], [74, 23], [75, 23], [76, 15], [77, 26], [78, 24], [79, 15], [80, 29], [81, 19], [82, 24], [83, 23], [84, 22], [85, 22], [86, 30], [87, 17], [88, 18], [89, 22], [90, 30], [91, 24], [92, 26], [93, 24], [94, 28], [95, 20], [96, 23], [97, 15], [98, 28], [99, 15]];
        //     }
        //
        //     else{
        //         json_temp = [[0, 28], [1, 23], [2, 18], [3, 23], [4, 21], [5, 25], [6, 17], [7, 15], [8, 27], [9, 17], [10, 24], [11, 18], [12, 21], [13, 23], [14, 16], [15, 28], [16, 24], [17, 19], [18, 30], [19, 20], [20, 27], [21, 21], [22, 19], [23, 15], [24, 30], [25, 18], [26, 22], [27, 26], [28, 23], [29, 23], [30, 24], [31, 30], [32, 19], [33, 22], [34, 23], [35, 24], [36, 21], [37, 30], [38, 20], [39, 18], [40, 30], [41, 27], [42, 20], [43, 30], [44, 21], [45, 26], [46, 28], [47, 30], [48, 29], [49, 27], [50, 15], [51, 21], [52, 29], [53, 30], [54, 28], [55, 27], [56, 17], [57, 28], [58, 23], [59, 26], [60, 20], [61, 21], [62, 22], [63, 27], [64, 15], [65, 30], [66, 30], [67, 20], [68, 24], [69, 15], [70, 20], [71, 22], [72, 24], [73, 25], [74, 19], [75, 23], [76, 28], [77, 27], [78, 22], [79, 19], [80, 19], [81, 28], [82, 21], [83, 19], [84, 16], [85, 20], [86, 24], [87, 21], [88, 20], [89, 29], [90, 22], [91, 15], [92, 23], [93, 15], [94, 24], [95, 15], [96, 30], [97, 22], [98, 15], [99, 17]];
        //         json_qual = [[0, 18], [1, 18], [2, 28], [3, 16], [4, 20], [5, 16], [6, 26], [7, 16], [8, 27], [9, 25], [10, 26], [11, 26], [12, 17], [13, 21], [14, 24], [15, 25], [16, 28], [17, 30], [18, 21], [19, 27], [20, 19], [21, 27], [22, 22], [23, 24], [24, 17], [25, 28], [26, 15], [27, 19], [28, 28], [29, 26], [30, 23], [31, 27], [32, 22], [33, 25], [34, 20], [35, 20], [36, 21], [37, 29], [38, 20], [39, 25], [40, 24], [41, 27], [42, 24], [43, 30], [44, 28], [45, 15], [46, 16], [47, 20], [48, 30], [49, 20], [50, 21], [51, 29], [52, 30], [53, 25], [54, 29], [55, 22], [56, 17], [57, 15], [58, 15], [59, 24], [60, 26], [61, 25], [62, 18], [63, 27], [64, 15], [65, 16], [66, 21], [67, 22], [68, 22], [69, 29], [70, 30], [71, 23], [72, 17], [73, 26], [74, 30], [75, 18], [76, 20], [77, 15], [78, 28], [79, 29], [80, 27], [81, 22], [82, 22], [83, 24], [84, 27], [85, 24], [86, 27], [87, 19], [88, 15], [89, 19], [90, 18], [91, 28], [92, 21], [93, 25], [94, 25], [95, 26], [96, 24], [97, 16], [98, 16], [99, 28]];
        //     }
        //
        //         for (let i = 0; i < json_temp.length; i++){
        //             dataPoints_temp.push({
        //                 x: json_temp[i][0],
        //                 y: json_temp[i][1]
        //             })
        //         }
        //
        //         for (let j = 0; j < json_qual.length;j++){
        //             dataPoints_qual.push({
        //                 x: json_qual[j][0],
        //                 y: json_qual[j][1]
        //             })
        //         }
        //         chart_temp.data.dataPoints = dataPoints_temp;
        //         chart_qual.data.dataPoints = dataPoints_qual;
        //         renderCharts(dataPoints_temp, dataPoints_qual);
        //     }





        // When page is loaded, get json files from server and display them in graphs
        window.onload = function () {


            // import json from "C:\\Schoolwerk\\dummyresults.json" assert { type: "json" };
            // var json = require("C:\\Schoolwerk\\dummyresults.json");
            var json_temp = [[0, 21], [1, 21], [2, 27], [3, 18], [4, 26], [5, 20], [6, 22], [7, 27], [8, 30], [9, 22], [10, 15], [11, 26], [12, 30], [13, 24], [14, 18], [15, 15], [16, 30], [17, 20], [18, 18], [19, 19], [20, 16], [21, 16], [22, 17], [23, 16], [24, 16], [25, 15], [26, 27], [27, 20], [28, 24], [29, 26], [30, 26], [31, 26], [32, 29], [33, 24], [34, 22], [35, 21], [36, 20], [37, 20], [38, 26], [39, 30], [40, 17], [41, 22], [42, 26], [43, 29], [44, 26], [45, 16], [46, 23], [47, 29], [48, 23], [49, 15], [50, 16], [51, 23], [52, 17], [53, 20], [54, 25], [55, 19], [56, 28], [57, 20], [58, 21], [59, 17], [60, 26], [61, 27], [62, 15], [63, 26], [64, 20], [65, 27], [66, 23], [67, 20], [68, 25], [69, 17], [70, 24], [71, 26], [72, 23], [73, 17], [74, 23], [75, 23], [76, 15], [77, 26], [78, 24], [79, 15], [80, 29], [81, 19], [82, 24], [83, 23], [84, 22], [85, 22], [86, 30], [87, 17], [88, 18], [89, 22], [90, 30], [91, 24], [92, 26], [93, 24], [94, 28], [95, 20], [96, 23], [97, 15], [98, 28], [99, 15]];
            var dataPoints_temp = [];
            var json_qual = [[0, 18], [1, 18], [2, 28], [3, 16], [4, 20], [5, 16], [6, 26], [7, 16], [8, 27], [9, 25], [10, 26], [11, 26], [12, 17], [13, 21], [14, 24], [15, 25], [16, 28], [17, 30], [18, 21], [19, 27], [20, 19], [21, 27], [22, 22], [23, 24], [24, 17], [25, 28], [26, 15], [27, 19], [28, 28], [29, 26], [30, 23], [31, 27], [32, 22], [33, 25], [34, 20], [35, 20], [36, 21], [37, 29], [38, 20], [39, 25], [40, 24], [41, 27], [42, 24], [43, 30], [44, 28], [45, 15], [46, 16], [47, 20], [48, 30], [49, 20], [50, 21], [51, 29], [52, 30], [53, 25], [54, 29], [55, 22], [56, 17], [57, 15], [58, 15], [59, 24], [60, 26], [61, 25], [62, 18], [63, 27], [64, 15], [65, 16], [66, 21], [67, 22], [68, 22], [69, 29], [70, 30], [71, 23], [72, 17], [73, 26], [74, 30], [75, 18], [76, 20], [77, 15], [78, 28], [79, 29], [80, 27], [81, 22], [82, 22], [83, 24], [84, 27], [85, 24], [86, 27], [87, 19], [88, 15], [89, 19], [90, 18], [91, 28], [92, 21], [93, 25], [94, 25], [95, 26], [96, 24], [97, 16], [98, 16], [99, 28]];
            var dataPoints_qual = [];

            for (var i = 0; i < json_temp.length; i++){
                dataPoints_temp.push({
                    x: json_temp[i][0],
                    y: json_temp[i][1]
                });
            }
            for (var j = 0; j < json_temp.length; j++){
                dataPoints_qual.push({
                    x: json_qual[j][0],
                    y: json_qual[j][1]
                });
            }

            // temperature chart
            var chart_temp = new CanvasJS.Chart("temperatureChart", {
                title:{
                    text: "Recente Temperaturen"
                },
                axisY:{
                    text: "Temperatuur (°C)"
                },
                data: [
                    {
                        type: "line",
                        dataPoints: dataPoints_temp
                    }
                ]
            });


            // air quality chart
            var chart_qual = new CanvasJS.Chart("qualityChart", {
                title:{
                    text: "Recente Luchtkwaliteit"
                },
                axisY:{
                    text: "CO2"
                },
                data: [
                    {
                        type: "line",
                        dataPoints: dataPoints_qual
                    }
                ]
            });

            chart_temp.render();
            chart_qual.render();




        }
    </script>

</head>
<body>

<?php

if(!isset($_SESSION['email'])){
    header("Location: /login.php");
}

?>

<!-- java source canvasJS for graph drawing and Bootstrap for general layout -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>

<!-- Sidebar -->
<div class="sidenav">
    <a href="map.php">Map</a>
    <a href="settings.php">Settings</a>
    <a href="about.php">About</a>
</div>

<!-- Top Bar-->
<div class="topbar">
    <div class="row align-items-center">
        <div class="col-4">
            <a href="index.php" type="button" class="btn btn-primary float-lg-start" id="home" >Home</a>
        </div>

        <div class="col-4">
        </div>

        <div class="col-4">
            <div class="btn-group float-end">
                <a href="login.php" type="button" class="btn btn-primary float-end" id="login">Log in</a>
                <a href="signup.php" type="button" class="btn btn-primary float-end" id="signup">Sign Up</a>
            </div>
        </div>
    </div>
</div>

<!-- Main page -->
<div class="main">
    <div class = "header">

        <h1>Map</h1>

        <select class="form-select form-select w-25 position-relative top-0 start-50 translate-middle-x" aria-label=".form-select-sm example">
            <option selected>Selecteer klaslokaal</option>
            <option value="room_2_75">Klas 2.75</option>
<!--            <option value="room_2_85">Klas 2.85</option>-->
<!--            <option value="room_6_50">Klas 6.50</option>-->
        </select>
    </div>



    <div class = "chart" id="temperatureChart" style="height: 300px; width: 45%"></div>
    <div class = "chart" id="qualityChart" style="height: 300px; width: 45%"></div>

</div>

</body>
</html>
